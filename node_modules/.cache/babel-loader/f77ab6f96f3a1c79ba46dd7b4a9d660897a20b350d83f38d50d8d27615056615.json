{"ast":null,"code":"import { axiosInstance } from \"../../Axios\";\nimport { tokenConfig } from \"./auth\";\nimport { returnErrors } from \"./error\";\nimport { returnMessages } from \"./message\";\nconst initialState = {\n  cases: []\n};\nconst supportReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"SET_CASES\":\n      return {\n        cases: action.payload\n      };\n    case \"CLEAR_SUPPORT\":\n      return initialState;\n    default:\n      return state;\n  }\n};\nexport const setCases = payload => ({\n  type: \"SET_CASES\",\n  payload\n});\nexport const clearSupport = () => ({\n  type: \"CLEAR_SUPPORT\"\n});\nexport const getSupportCases = () => async (dispatch, getState) => {\n  try {\n    const {\n      data,\n      status\n    } = await axiosInstance.get('/support/user-case/', tokenConfig(getState));\n    if (status > 399) throw data;\n    console.log(data);\n    dispatch(clearSupport());\n    dispatch(setCases(data));\n  } catch (error) {\n    var _error$response$data;\n    console.log(error);\n    dispatch(returnErrors((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail, error.response.status));\n    throw error.response.data;\n  }\n};\nexport const createSupportCase = payload => async (dispatch, getState) => {\n  try {\n    const {\n      data,\n      status\n    } = await axiosInstance.post(`/support/create-case/`, payload, tokenConfig(getState));\n    if (status > 399) throw data;\n    const msg = data !== null && data !== void 0 && data.message ? data.message : \"Support case submitted!\";\n    console.log(msg);\n    dispatch(returnMessages(msg, 200));\n  } catch (error) {\n    var _error$response$data2;\n    console.log(error);\n    dispatch(returnErrors((_error$response$data2 = error.response.data) === null || _error$response$data2 === void 0 ? void 0 : _error$response$data2.detail, error.response.status));\n    throw error.response.data;\n  }\n};\nexport const getSupportDetails = id => async (dispatch, getState) => {\n  try {\n    const {\n      data,\n      status\n    } = await axiosInstance.get(`/support/case-history/${id}`, tokenConfig(getState));\n    if (status > 399) throw data;\n    return data;\n  } catch (error) {\n    console.log(error);\n    throw error;\n  }\n};\nexport default supportReducer;","map":{"version":3,"names":["axiosInstance","tokenConfig","returnErrors","returnMessages","initialState","cases","supportReducer","state","action","type","payload","setCases","clearSupport","getSupportCases","dispatch","getState","data","status","get","console","log","error","_error$response$data","response","detail","createSupportCase","post","msg","message","_error$response$data2","getSupportDetails","id"],"sources":["/Users/fahedsayyed/Documents/mac-and-gray/src/store/reducers/support.js"],"sourcesContent":["import { axiosInstance } from \"../../Axios\";\r\nimport { tokenConfig } from \"./auth\";\r\nimport { returnErrors } from \"./error\";\r\nimport { returnMessages } from \"./message\";\r\n\r\nconst initialState = {\r\n    cases: [],\r\n}\r\n\r\nconst supportReducer = (state = initialState, action) =>{\r\n    switch (action.type) {\r\n        case \"SET_CASES\":\r\n            return {\r\n                cases: action.payload\r\n            }\r\n        case \"CLEAR_SUPPORT\":\r\n            return initialState;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setCases = (payload) => ({\r\n    type: \"SET_CASES\",\r\n    payload\r\n})\r\n\r\nexport const clearSupport = () => ({\r\n    type: \"CLEAR_SUPPORT\"\r\n})\r\n\r\nexport const getSupportCases = () => async (dispatch, getState) => {\r\n    try {\r\n        const { data, status } = await axiosInstance.get('/support/user-case/', tokenConfig(getState));\r\n        if(status>399) throw(data);\r\n        console.log(data)\r\n        dispatch(clearSupport());\r\n        dispatch(setCases(data));\r\n    } catch (error) {\r\n        console.log(error)\r\n        dispatch(returnErrors(error.response.data?.detail,error.response.status))\r\n        throw(error.response.data)\r\n    }\r\n}\r\n\r\nexport const createSupportCase = (payload) => async (dispatch, getState) => {\r\n    try {\r\n        const {data, status} = await axiosInstance.post(`/support/create-case/`, payload, tokenConfig(getState));\r\n        if(status>399) throw(data);\r\n        const msg = data?.message?data.message:\"Support case submitted!\";\r\n        console.log(msg)\r\n        dispatch(returnMessages(msg, 200))\r\n    } catch (error) {\r\n        console.log(error)\r\n        dispatch(returnErrors(error.response.data?.detail,error.response.status));\r\n        throw(error.response.data);\r\n    }\r\n}\r\n\r\nexport const getSupportDetails = (id) => async (dispatch, getState) => {\r\n    try {\r\n        const {data, status} = await axiosInstance.get(`/support/case-history/${id}`, tokenConfig(getState));\r\n        if(status>399) throw(data);\r\n        return data\r\n    } catch (error) {\r\n        console.log(error)\r\n        throw(error)\r\n    }\r\n}\r\n\r\nexport default supportReducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}